<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Home</title>
    <link rel="stylesheet" href="index.css">
</head>
<body>
<div id="home">
   <div id="header">
          <h3>Welcome to Our Store</h3>
          <button onclick="logoutUser()">Logout</button>
      </div>
   <div id="homePage">
       <h1 style="text-align: center;">Product Show</h1>
    
           <input id="productName" style="margin: auto; display: block; width: 350px; height: 35px; border-radius: 10px; margin-top: 40px; " type="text" placeholder="Product Name" ><br>
           <input id="productPrice" style="margin: auto; display: block;  width: 350px; height: 35px; border-radius: 10px; margin-top: 15px;" type="number" placeholder="Price" ><br>
          <input id="productCategory" style="margin: auto; display: block;  width: 350px; height: 35px; border-radius: 10px; margin-top: 15px;" type="text" placeholder="Category" ><br>
          <input id="productFile" style="margin: auto; display: block;  width: 350px; height: 35px; border-radius: 10px; margin-top: 15px;" type="file" accept="image/*">

            <button style="width: 120px; height: 30px; margin: auto; display: block;   " onclick="addProduct()">Add Product</button>
   </div>
   <h2>All Products</h2>
    <div id='productsContainer'></div>
</div>
<script>
 
    function addProduct() {
        let name = document.getElementById("productName").value;
        let price = document.getElementById("productPrice").value;
        let category = document.getElementById("productCategory").value;
        let fileInput = document.getElementById("productFile");
        
        if (fileInput.files.length === 0) {
            alert("Please select an image.");
            return;
        }

        let reader = new FileReader();
        reader.onload = function (e) {
            let img = e.target.result; 
            let products = JSON.parse(localStorage.getItem("products")) || [];
            products.push({ name, price, category, img });
            localStorage.setItem("products", JSON.stringify(products));
            alert("Product added successfully!");
            displayProducts();
        };
        reader.readAsDataURL(fileInput.files[0]); 
    }

    function displayProducts() {
        let products = JSON.parse(localStorage.getItem("products")) || [];
        let container = document.getElementById("productsContainer");
        container.innerHTML = "";
         
        products.forEach(product => {
            let div = document.createElement("div");
            div.innerHTML = `<h1>${product.name}</h1><img src="${product.img}" alt="${product.name}" style="width:340px; height:200px;"><p>Price: $${product.price}</p><p>Category: ${product.category}</p>`;
            container.appendChild(div);
        });
    }

    function logoutUser() {
        localStorage.removeItem("currentUser");
        alert("Logged out successfully!");
        window.location.href = "login.html"; 
    }

    window.onload = function() {
        checkUser();
        displayProducts();
    };
</script>
</body>
</html>
